<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GlobalArtPro - Artistes du Monde</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #6a11cb, #2575fc);
      color: #fff;
      text-align: center;
      min-height: 100vh;
    }
    header {
      padding: 2rem 1rem 1rem 1rem;
    }
    header h1 {
      font-size: 2.5rem;
      margin: 0;
      color: gold;
      letter-spacing: 2px;
    }
    header p {
      font-size: 1.2rem;
      color: #eee;
      margin-bottom: 1rem;
    }
    #langSwitcher {
      margin: 1rem 0;
      padding: 0.5rem;
      border-radius: 6px;
      border: none;
      font-size: 1rem;
    }
    nav {
      margin: 2rem 0;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
    }
    nav a, nav button {
      background: gold;
      color: #2d0066;
      padding: 1rem 2rem;
      border-radius: 12px;
      text-decoration: none;
      font-weight: bold;
      font-size: 1.1rem;
      box-shadow: 0 2px 8px #0002;
      transition: background 0.2s;
      border: none;
      cursor: pointer;
      margin-bottom: 0.5rem;
    }
    nav a:hover, nav button:hover {
      background: #fff;
      color: #6a11cb;
    }
    section {
      margin: 2rem 0;
    }
    #pi-network button {
      margin: 0.5rem;
      padding: 0.7rem 1.5rem;
      border: none;
      border-radius: 8px;
      background: gold;
      color: #2d0066;
      font-weight: bold;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.2s;
    }
    #gapStudioTabs {
  margin-bottom: 1.2em;
}
#gapStudioTabs button {
  background: #fff;
  color: #6a11cb;
  border: none;
  border-radius: 8px 8px 0 0;
  padding: 0.7em 2em;
  font-size: 1.1em;
  margin-right: 0.2em;
  cursor: pointer;
  font-weight: bold;
  opacity: 0.7;
  transition: opacity 0.2s;
}
#gapStudioTabs button.active {
  background: gold;
  color: #2d0066;
  opacity: 1;
}
    #pi-network button:hover {
      background: #fff;
      color: #6a11cb;
    }
    .card {
      background: rgba(255,255,255,0.07);
      border-radius: 16px;
      margin: 1rem auto;
      padding: 1.5rem;
      max-width: 700px;
      box-shadow: 0 2px 16px #0001;
    }
    footer {
      margin-top: 3rem;
      padding: 1rem;
      background: rgba(255,255,255,0.08);
      font-size: 0.95rem;
      color: #eee;
    }
    .landing-btns {
  margin: 2.5rem 0 1.5rem 0;
  display: flex;
  justify-content: center;
  gap: 2rem;
  animation: fadeInBounce 1.2s cubic-bezier(.23,1.13,.55,.99);
}

@keyframes fadeInBounce {
  0% { opacity: 0; transform: translateY(40px) scale(0.95);}
  60% { opacity: 1; transform: translateY(-10px) scale(1.05);}
  80% { transform: translateY(4px) scale(0.98);}
  100% { opacity: 1; transform: translateY(0) scale(1);}
}

/* Stroke Animation */
.btn-stroke {
  position: relative;
  background: linear-gradient(90deg, #ffd700 0%, #6a11cb 100%);
  color: #2d0066;
  font-size: 1.2rem;
  padding: 1.1rem 2.7rem;
  border: none;
  border-radius: 16px;
  font-weight: bold;
  overflow: hidden;
  z-index: 1;
  box-shadow: 0 2px 12px #0002;
  cursor: pointer;
  transition: color 0.3s;
}
.btn-stroke:before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 16px;
  border: 3px solid #ffd700;
  z-index: 2;
  pointer-events: none;
  animation: strokeDraw 1.2s cubic-bezier(.23,1.13,.55,.99) 0.2s both;
}
@keyframes strokeDraw {
  0% { border-color: transparent; }
  60% { border-color: #ffd700; }
  100% { border-color: #ffd700; }
}
.btn-stroke:hover, .btn-stroke:focus {
  color: #fff;
  background: linear-gradient(90deg, #6a11cb 0%, #ffd700 100%);
}
.btn-stroke:after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 16px;
  background: linear-gradient(90deg, #ffd700 0%, #6a11cb 100%);
  opacity: 0;
  transition: opacity 0.3s;
  z-index: 1;
}
.btn-stroke:hover:after, .btn-stroke:focus:after {
  opacity: 0.25;
}

/* Glassmorphism + Glow */
.btn-glass {
  position: relative;
  background: rgba(255,255,255,0.18);
  color: #6a11cb;
  font-size: 1.2rem;
  padding: 1.1rem 2.7rem;
  border: none;
  border-radius: 16px;
  font-weight: bold;
  box-shadow: 0 4px 24px 0 rgba(106,17,203,0.18), 0 0 16px 2px #ffd70055;
  backdrop-filter: blur(8px);
  border: 2px solid rgba(255,255,255,0.25);
  cursor: pointer;
  overflow: hidden;
  transition: background 0.3s, color 0.3s, box-shadow 0.3s;
}
.btn-glass:hover, .btn-glass:focus {
  background: rgba(255,255,255,0.32);
  color: #2d0066;
  box-shadow: 0 6px 32px 0 #ffd70099, 0 0 24px 4px #6a11cb55;
}

#svgWorldMap g path, #svgWorldMap ellipse {
  transition: opacity 0.2s, filter 0.2s;
}
#svgWorldMap {
  animation: fadeInBounce 1.2s cubic-bezier(.23,1.13,.55,.99);
}
#cultureTooltip {
  position: absolute;
  background: rgba(0,0,0,0.85);
  color: #ffd700;
  padding: 0.4em 1em;
  border-radius: 8px;
  pointer-events: none;
  font-size: 1.1em;
  z-index: 1000;
  display: none;
}
.btn-icon {
  display: inline-block;
  font-size: 1.5em;
  margin-right: 0.6em;
  vertical-align: middle;
  animation: iconBounce 1.2s infinite alternate cubic-bezier(.23,1.13,.55,.99);
}
.icon-palette { animation-delay: 0.1s; }
.icon-star { animation-delay: 0.4s; }

@keyframes iconBounce {
  0% { transform: translateY(0) scale(1);}
  60% { transform: translateY(-8px) scale(1.15);}
  100% { transform: translateY(0) scale(1);}
}
@keyframes floatPhrase {
  0% { transform: translateY(0);}
  100% { transform: translateY(-20px);}
}
  </style>
  <script src="https://unpkg.com/globe.gl"></script>
</head>
<body>
  <header>
    <h1 data-key="welcome">Bienvenue sur GlobalArtPro</h1>
    <p data-key="subtitle">La plateforme mondiale des artistes - Art, Culture & Innovation</p>
    <select id="langSwitcher">
      <option value="fr">Fran√ßais</option>
      <option value="en">English</option>
      <option value="es">Espa√±ol</option>
      <option value="ru">–†—É—Å—Å–∫–∏–π</option>
      <option value="zh">‰∏≠Êñá</option>
    </select>
    <div class="landing-btns">
  <button class="btn-stroke" onclick="scrollToSection('marketplaceSection')">
    <span class="btn-icon icon-palette">üé®</span>
    D√©couvrir les artistes
  </button>
  <button class="btn-glass" onclick="scrollToSection('authSection')">
    <span class="btn-icon icon-star">‚ú®</span>
    Rejoindre maintenant
  </button>
</div>
  </header>
 <nav>
  <a href="#" data-key="marketplace">Marketplace</a>
  <a href="#" data-key="museum">Mus√©es virtuels</a>
  <!-- SUPPRIMER CETTE LIGNE : <a href="#" data-key="culture">Culture du monde</a> -->
  <a href="#" data-key="community">Communaut√©</a>
  <a href="#" data-key="mining">Minage Art Coin</a>
  <a href="#" data-key="transactions">Transactions Crypto</a>
  <a href="#" data-key="artistDashboard">Tableau de bord Artiste</a>
  <a href="#" id="btnAdmin" data-key="adminDashboard">Admin</a>
  <a href="#" onclick="scrollToSection('gallerySection');return false;">Galerie</a>
  <a href="#" onclick="scrollToSection('cultureSection');return false;">Culture du Monde</a>
  <a href="#" onclick="scrollToSection('gapStudioSection');return false;">Cr√©er avec GAP Studio</a>
  <button id="btnScanner" type="button" data-key="scanner">Scanner RA</button>
  <button id="btnChallenges" type="button" data-key="challenges">Challenges cr√©atifs</button>
  <button id="btnDashboard" type="button" data-key="analytics">Dashboard Analytics</button>
  <a href="#donateSection" style="background:#fff;color:#6a11cb;font-weight:bold;">Soutenir</a>
</nav>
<!-- Place la section d'authentification ici, juste apr√®s </nav> -->
<section id="authSection" class="card">
  <h2>Connexion / Inscription Artiste</h2>
  <div id="authForms">
    <form id="loginForm" onsubmit="loginArtist(event)" style="margin-bottom:1rem;">
      <h3>Connexion</h3>
      <input type="text" id="loginName" placeholder="Nom d'artiste" required><br>
      <input type="password" id="loginPass" placeholder="Mot de passe" required><br>
      <button type="submit">Se connecter</button>
    </form>
    <form id="registerForm" onsubmit="registerArtist(event)">
      <h3>Inscription</h3>
      <input type="text" id="regName" placeholder="Nom d'artiste" required><br>
      <input type="email" id="regEmail" placeholder="Email" required><br>
      <input type="password" id="regPass" placeholder="Mot de passe" required><br>
      <input type="text" id="regBio" placeholder="Bio (optionnel)"><br>
      <select id="regRole" required>
        <option value="">Choisir un r√¥le</option>
        <option value="artiste">Artiste</option>
        <option value="visiteur">Visiteur</option>
      </select><br>
      <button type="submit">S'inscrire</button>
    </form>
  </div>
  <div id="artistWelcome" style="display:none;"></div>
</section>
<section id="marketplaceSection" class="card">
  <h2 data-key="marketplace">Marketplace</h2>
  <div id="marketplaceList"></div>
</section>
<section id="gallerySection" class="card">
  <h2>Galerie des ≈ìuvres</h2>
  <div style="margin-bottom:1rem;">
    <label for="galleryFilter">Filtrer par cat√©gorie :</label>
    <select id="galleryFilter" onchange="renderGallery()">
      <option value="all">Toutes</option>
      <option value="Peinture">Peinture</option>
      <option value="Sculpture">Sculpture</option>
      <option value="Art num√©rique">Art num√©rique</option>
      <option value="NFT / Peinture num√©rique">NFT / Peinture num√©rique</option>
      <!-- Ajoute d'autres cat√©gories si besoin -->
    </select>
  </div>
  <div id="galleryList"></div>
</section>
<section id="cultureSection" class="card">
  <div id="globeContainer" style="width:100%;max-width:700px;height:400px;margin:2rem auto;"></div>
  <div id="cultureInfo"></div>
  <div id="culturePhrases" style="position:relative;min-height:40px;"></div>
  <div id="artistsByCountry" style="margin-top:2rem;"></div>
  <div id="storiesSection">
  <h2>üìö Histoires & traditions</h2>
  <div id="sharedCultureFormZone"></div>
  <div id="sharedCultureList"></div>
  <div style="margin-bottom:1rem;">
    <label for="storyRegion">Choisir une r√©gion :</label>
    <select id="storyRegion" onchange="renderStories()">
      <option value="all">Toutes</option>
      <option value="Afrique">Afrique</option>
      <option value="Europe">Europe</option>
      <option value="Asie">Asie</option>
      <option value="Am√©riques">Am√©riques</option>
      <option value="Oc√©anie">Oc√©anie</option>
    </select>
    <section id="gapStudioSection" class="card">
  <h2>üé® GAP Studio IA</h2>
  <div id="gapStudioTabs">
    <button onclick="showGapTab('create')" id="tabCreate" class="active">Cr√©er</button>
    <button onclick="showGapTab('explore')" id="tabExplore">Explorer</button>
    <button onclick="showGapTab('learn')" id="tabLearn">Apprendre</button>
  </div>
  <div id="gapStudioContent"></div>
</section>
  </div>
  <div id="storiesList"></div>
</div>
</section>
<section id="donateSection" class="card">
  <h2>Soutenir l‚ÄôArt et les Artistes üé®‚ú®</h2>
  <p>
    Votre contribution aide √† faire vivre GlobalArtpro, soutenir les artistes du monde entier et d√©velopper notre √©cosyst√®me.<br>
    Vous pouvez faire un don en Pi Coin ou en Art Coin.<br>
    Chaque geste compte et fait grandir la communaut√© artistique mondiale.
  </p>
  <button onclick="showDonateModal('pi')">Faire un don en Pi Coin</button>
  <button onclick="showDonateModal('art')">Faire un don en Art Coin</button>
  <div id="donateModal" style="display:none;margin-top:1rem;"></div>
  <div id="donorWall" style="margin-top:2rem;">
    <h3>Mur des donateurs</h3>
    <ul id="donorList" style="list-style:none;padding:0;"></ul>
  </div>
</section>
<section id="partnersSection" class="card">
  <h2>Partenaires & Collaborations ü§ù</h2>
  <p>
    Nous croyons que l‚Äôart a le pouvoir de rassembler.<br>
    GlobalArtpro s‚Äôouvre aux collaborations avec entreprises, mus√©es, ONG et particuliers passionn√©s par la culture.<br>
    Devenez partenaire et b√©n√©ficiez d‚Äôune visibilit√© unique dans un √©cosyst√®me artistique et innovant.
  </p>
  <button onclick="document.getElementById('partnerForm').style.display='block'">Devenir partenaire</button>
  <button onclick="document.getElementById('partnerLogos').style.display='block'">Nos partenaires</button>
  <div id="partnerForm" style="display:none;margin-top:1rem;">
    <h3>Formulaire de partenariat</h3>
    <form onsubmit="submitPartnerForm(event)">
      <input type="text" placeholder="Nom de l'entreprise/organisation" required style="margin:0.5rem;"><br>
      <input type="email" placeholder="Email" required style="margin:0.5rem;"><br>
      <input type="text" placeholder="Type de partenariat" style="margin:0.5rem;"><br>
      <textarea placeholder="Message" style="margin:0.5rem;"></textarea><br>
      <button type="submit">Envoyer</button>
      <button type="button" onclick="document.getElementById('partnerForm').style.display='none'">Annuler</button>
    </form>
    <div id="partnerThanks" style="color:gold;margin-top:1rem;"></div>
    </div>
  <div id="partnerLogos" style="display:none;margin-top:1rem;">
    <h3>Nos partenaires</h3>
    <div>
      <!-- Ajoute ici les logos de tes partenaires -->
      <img src="https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg" alt="Microsoft" style="height:40px;margin:0.5rem;">
      <img src="https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg" alt="React" style="height:40px;margin:0.5rem;">
      <!-- ... -->
    </div>
    <button onclick="document.getElementById('partnerLogos').style.display='none'">Fermer</button>
  </div>
</section>
  <section id="pi-network" class="card">
    <h2 data-key="piSection">Interagir avec Pi Network</h2>
    <button id="btnConnectPi" data-key="connectBtn">Connecter Pi Wallet</button>
    <button id="btnCreateNFT" data-key="createBtn">Cr√©er une ≈ìuvre</button>
    <button id="btnBuyNFT" data-key="buyBtn">Acheter une ≈ìuvre</button>
    <button id="btnCertificate" data-key="certificateBtn">G√©n√©rer certificat</button>
    <button id="btnHistory" data-key="historyBtn">Voir historique NFT</button>
  </section>

  <section id="suggestions" class="card">
    <h2 data-key="suggestions">Suggestions personnalis√©es</h2>
    <div id="suggestedArtworks"></div>
  </section>

  <section id="gamification" class="card">
    <h2 data-key="gamification">Badges & Points</h2>
    <div id="userBadges"></div>
  </section>
  <section id="analyticsSection" class="card">
  <h2>Dashboard Analytics</h2>
  <div id="artistAnalytics"></div>
</section>
  <script>
    // Traductions multilingues
    const translations = {
      fr: {
        welcome: "Bienvenue sur GlobalArtPro",
        subtitle: "La plateforme mondiale des artistes - Art, Culture & Innovation",
        marketplace: "Marketplace",
        museum: "Mus√©es virtuels",
        culture: "Culture du monde",
        community: "Communaut√©",
        mining: "Minage Art Coin",
        transactions: "Transactions Crypto",
        artistDashboard: "Tableau de bord Artiste",
        adminDashboard: "Admin",
        gapStudio: "IA GAP Studio",
        piSection: "Interagir avec Pi Network",
        connectBtn: "Connecter Pi Wallet",
        createBtn: "Cr√©er une ≈ìuvre",
        buyBtn: "Acheter une ≈ìuvre",
        certificateBtn: "G√©n√©rer certificat",
        historyBtn: "Voir historique NFT",
        suggestions: "Suggestions personnalis√©es",
        gamification: "Badges & Points",
        scanner: "Scanner RA",
        challenges: "Challenges cr√©atifs",
        analytics: "Dashboard Analytics"
      },
      en: {
        welcome: "Welcome to GlobalArtPro",
        subtitle: "The global platform for artists - Art, Culture & Innovation",
        marketplace: "Marketplace",
        museum: "Virtual Museums",
        culture: "World Culture",
        community: "Community",
        mining: "Art Coin Mining",
        transactions: "Crypto Transactions",
        artistDashboard: "Artist Dashboard",
        adminDashboard: "Admin",
        gapStudio: "GAP Studio AI",
        piSection: "Interact with Pi Network",
        connectBtn: "Connect Pi Wallet",
        createBtn: "Create Artwork",
        buyBtn: "Buy Artwork",
        certificateBtn: "Generate Certificate",
        historyBtn: "View NFT History",
        suggestions: "Personalized Suggestions",
        gamification: "Badges & Points",
        scanner: "AR Scanner",
        challenges: "Creative Challenges",
        analytics: "Analytics Dashboard"
      },
      es: {
        welcome: "Bienvenido a GlobalArtPro",
        subtitle: "La plataforma mundial de artistas - Arte, Cultura e Innovaci√≥n",
        marketplace: "Mercado",
        museum: "Museos virtuales",
        culture: "Cultura mundial",
        community: "Comunidad",
        mining: "Miner√≠a Art Coin",
        transactions: "Transacciones Cripto",
        artistDashboard: "Panel de Artista",
        adminDashboard: "Admin",
        gapStudio: "IA GAP Studio",
        piSection: "Interactuar con Pi Network",
        connectBtn: "Conectar Pi Wallet",
        createBtn: "Crear obra",
        buyBtn: "Comprar obra",
        certificateBtn: "Generar certificado",
        historyBtn: "Ver historial NFT",
        suggestions: "Sugerencias personalizadas",
        gamification: "Insignias y puntos",
        scanner: "Esc√°ner RA",
        challenges: "Desaf√≠os creativos",
        analytics: "Panel de an√°lisis"
      },
      ru: {
        welcome: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ GlobalArtPro",
        subtitle: "–ú–∏—Ä–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤ ‚Äî –∏—Å–∫—É—Å—Å—Ç–≤–æ, –∫—É–ª—å—Ç—É—Ä–∞ –∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏",
        marketplace: "–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å",
        museum: "–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º—É–∑–µ–∏",
        culture: "–ö—É–ª—å—Ç—É—Ä–∞ –º–∏—Ä–∞",
        community: "–°–æ–æ–±—â–µ—Å—Ç–≤–æ",
        mining: "–ú–∞–π–Ω–∏–Ω–≥ Art Coin",
        transactions: "–ö—Ä–∏–ø—Ç–æ-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏",
        artistDashboard: "–ü–∞–Ω–µ–ª—å —Ö—É–¥–æ–∂–Ω–∏–∫–∞",
        adminDashboard: "–ê–¥–º–∏–Ω",
        gapStudio: "GAP Studio –ò–ò",
        piSection: "–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Pi Network",
        connectBtn: "–ü–æ–¥–∫–ª—é—á–∏—Ç—å Pi Wallet",
        createBtn: "–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ",
        buyBtn: "–ö—É–ø–∏—Ç—å –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ",
        certificateBtn: "–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç",
        historyBtn: "–ò—Å—Ç–æ—Ä–∏—è NFT",
        suggestions: "–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏",
        gamification: "–ë–µ–π–¥–∂–∏ –∏ –±–∞–ª–ª—ã",
        scanner: "–°–∫–∞–Ω–µ—Ä AR",
        challenges: "–¢–≤–æ—Ä—á–µ—Å–∫–∏–µ –∫–æ–Ω–∫—É—Ä—Å—ã",
        analytics: "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"
      },
      zh: {
        welcome: "Ê¨¢ËøéÊù•Âà∞ GlobalArtPro",
        subtitle: "ÂÖ®ÁêÉËâ∫ÊúØÂÆ∂Âπ≥Âè∞ - Ëâ∫ÊúØ„ÄÅÊñáÂåñ‰∏éÂàõÊñ∞",
        marketplace: "Â∏ÇÂú∫",
        museum: "ËôöÊãüÂçöÁâ©È¶Ü",
        culture: "‰∏ñÁïåÊñáÂåñ",
        community: "Á§æÂå∫",
        mining: "ÊåñÁüø Art Coin",
        transactions: "Âä†ÂØÜ‰∫§Êòì",
        artistDashboard: "Ëâ∫ÊúØÂÆ∂Èù¢Êùø",
        adminDashboard: "ÁÆ°ÁêÜÂëò",
        gapStudio: "GAP Studio ‰∫∫Â∑•Êô∫ËÉΩ",
        piSection: "‰∏é Pi Network ‰∫íÂä®",
        connectBtn: "ËøûÊé• Pi Èí±ÂåÖ",
        createBtn: "ÂàõÂª∫‰ΩúÂìÅ",
        buyBtn: "Ë¥≠‰π∞‰ΩúÂìÅ",
        certificateBtn: "ÁîüÊàêËØÅ‰π¶",
        historyBtn: "Êü•ÁúãNFTÂéÜÂè≤",
        suggestions: "‰∏™ÊÄßÂåñÊé®Ëçê",
        gamification: "ÂæΩÁ´†‰∏éÁßØÂàÜ",
        scanner: "ARÊâ´Êèè",
        challenges: "ÂàõÊÑèÊåëÊàò",
        analytics: "ÂàÜÊûêÈù¢Êùø"
      }
    };

    // Fonction de changement de langue
    document.getElementById("langSwitcher").addEventListener("change", function() {
      const lang = this.value;
      document.querySelectorAll("[data-key]").forEach(el => {
        const key = el.getAttribute("data-key");
        if (translations[lang][key]) el.textContent = translations[lang][key];
      });
    });
  </script>
  <script>
  // Donn√©es fictives pour la marketplace (avec images)
const artworks = [
  {
    id: 1,
    title: {
      fr: "L‚Äô√âveil des Anc√™tres",
      en: "The Awakening of Ancestors",
      es: "El Despertar de los Ancestros",
      ru: "–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –ü—Ä–µ–¥–∫–æ–≤",
      zh: "Á•ñÂÖàÁöÑËßâÈÜí"
    },
    artist: {
      name: "Amina K.",
      profile: "#"
    },
    year: 2024,
    type: "NFT / Peinture num√©rique",
    dimensions: "4000x6000 px",
    technique: {
      fr: "IA g√©n√©rative + retouche digitale",
      en: "Generative AI + digital retouch",
      es: "IA generativa + retoque digital",
      ru: "–ì–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ò–ò + —Ü–∏—Ñ—Ä–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞",
      zh: "ÁîüÊàêÂºèAI+Êï∞Â≠ó‰øÆÈ•∞"
    },
    inspiration: {
      fr: "Cette ≈ìuvre explore la m√©moire collective africaine, entre tradition et futur.",
      en: "This work explores African collective memory, between tradition and future.",
      es: "Esta obra explora la memoria colectiva africana, entre tradici√≥n y futuro.",
      ru: "–≠—Ç–∞ —Ä–∞–±–æ—Ç–∞ –∏—Å—Å–ª–µ–¥—É–µ—Ç –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å –ê—Ñ—Ä–∏–∫–∏ –º–µ–∂–¥—É —Ç—Ä–∞–¥–∏—Ü–∏–µ–π –∏ –±—É–¥—É—â–∏–º.",
      zh: "ËøôÈÉ®‰ΩúÂìÅÊé¢Á¥¢‰∫ÜÈùûÊ¥≤ÁöÑÈõÜ‰ΩìËÆ∞ÂøÜÔºå‰ªã‰∫é‰º†Áªü‰∏éÊú™Êù•‰πãÈó¥„ÄÇ"
    },
    quote: {
      fr: "Chaque pixel est une voix oubli√©e qui rena√Æt.",
      en: "Each pixel is a forgotten voice reborn.",
      es: "Cada p√≠xel es una voz olvidada que renace.",
      ru: "–ö–∞–∂–¥—ã–π –ø–∏–∫—Å–µ–ª—å ‚Äî —ç—Ç–æ –∑–∞–±—ã—Ç—ã–π –≥–æ–ª–æ—Å, –≤–æ–∑—Ä–æ–∂–¥–∞—é—â–∏–π—Å—è –≤–Ω–æ–≤—å.",
      zh: "ÊØè‰∏™ÂÉèÁ¥†ÈÉΩÊòØÈáçÁîüÁöÑË¢´ÈÅóÂøò‰πãÂ£∞„ÄÇ"
    },
    authenticity: "Certifi√© sur Pi Blockchain (#TX 9a7c4...)",
    edition: "1/1 (pi√®ce unique)",
    provenance: "Cr√©√© par l‚Äôartiste, jamais vendu.",
    status: {
      fr: "Disponible",
      en: "Available",
      es: "Disponible",
      ru: "–î–æ—Å—Ç—É–ø–Ω–æ",
      zh: "ÂèØÁî®"
    },
    price: 25,
    priceUSD: 200,
    saleMode: {
      fr: "Achat direct",
      en: "Direct buy",
      es: "Compra directa",
      ru: "–ü—Ä—è–º–∞—è –ø–æ–∫—É–ø–∫–∞",
      zh: "Áõ¥Êé•Ë¥≠‰π∞"
    },
    lastBid: null,
    views: 1230,
    favorites: 320,
    comments: 45,
    image: "https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80"
  },
  {
    id: 2,
    title: {
      fr: "For√™t Mystique",
      en: "Mystic Forest",
      es: "Bosque M√≠stico",
      ru: "–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ª–µ—Å",
      zh: "Á•ûÁßòÊ£ÆÊûó"
    },
    artist: {
      name: "Jean Dubois",
      profile: "#"
    },
    year: 2023,
    type: "Peinture",
    dimensions: "80x120 cm",
    technique: {
      fr: "Acrylique sur toile",
      en: "Acrylic on canvas",
      es: "Acr√≠lico sobre lienzo",
      ru: "–ê–∫—Ä–∏–ª –Ω–∞ —Ö–æ–ª—Å—Ç–µ",
      zh: "‰∏ôÁÉØÁîªÂ∏É"
    },
    inspiration: {
      fr: "Une exploration des profondeurs myst√©rieuses de la nature.",
      en: "An exploration of the mysterious depths of nature.",
      es: "Una exploraci√≥n de las profundidades misteriosas de la naturaleza.",
      ru: "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≥–ª—É–±–∏–Ω –ø—Ä–∏—Ä–æ–¥—ã.",
      zh: "ÂØπÂ§ßËá™ÁÑ∂Á•ûÁßòÊ∑±Â§ÑÁöÑÊé¢Á¥¢„ÄÇ"
    },
    quote: {
      fr: "La for√™t cache plus de secrets qu‚Äôon ne le croit.",
      en: "The forest hides more secrets than you think.",
      es: "El bosque esconde m√°s secretos de los que crees.",
      ru: "–õ–µ—Å —Å–∫—Ä—ã–≤–∞–µ—Ç –±–æ–ª—å—à–µ —Å–µ–∫—Ä–µ—Ç–æ–≤, —á–µ–º –∫–∞–∂–µ—Ç—Å—è.",
      zh: "Ê£ÆÊûóÈöêËóèÁùÄÊØî‰Ω†ÊÉ≥Ë±°ÁöÑÊõ¥Â§öÁöÑÁßòÂØÜ„ÄÇ"
    },
    authenticity: "Certifi√© sur Pi Blockchain (#TX 8b2d1...)",
    edition: "1/1 (pi√®ce unique)",
    provenance: "Cr√©√© par l‚Äôartiste, jamais vendu.",
    status: {
      fr: "Disponible",
      en: "Available",
      es: "Disponible",
      ru: "–î–æ—Å—Ç—É–ø–Ω–æ",
      zh: "ÂèØÁî®"
    },
    price: 18,
    priceUSD: 150,
    saleMode: {
      fr: "Achat direct",
      en: "Direct buy",
      es: "Compra directa",
      ru: "–ü—Ä—è–º–∞—è –ø–æ–∫—É–ø–∫–∞",
      zh: "Áõ¥Êé•Ë¥≠‰π∞"
    },
    lastBid: null,
    views: 890,
    favorites: 210,
    comments: 18,
    image: "https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=400&q=80"
  },
  {
    id: 3,
    title: {
      fr: "Danse des Couleurs",
      en: "Dance of Colors",
      es: "Danza de Colores",
      ru: "–¢–∞–Ω–µ—Ü —Ü–≤–µ—Ç–æ–≤",
      zh: "Ëâ≤ÂΩ©‰πãËàû"
    },
    artist: {
      name: "Lina Chen",
      profile: "#"
    },
    year: 2022,
    type: "Art num√©rique",
    dimensions: "3000x3000 px",
    technique: {
      fr: "Peinture digitale",
      en: "Digital painting",
      es: "Pintura digital",
      ru: "–¶–∏—Ñ—Ä–æ–≤–∞—è –∂–∏–≤–æ–ø–∏—Å—å",
      zh: "Êï∞Â≠óÁªòÁîª"
    },
    inspiration: {
      fr: "Une explosion de couleurs qui c√©l√®bre la diversit√©.",
      en: "An explosion of colors celebrating diversity.",
      es: "Una explosi√≥n de colores que celebra la diversidad.",
      ru: "–í–∑—Ä—ã–≤ –∫—Ä–∞—Å–æ–∫, –ø—Ä–æ—Å–ª–∞–≤–ª—è—é—â–∏–π —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ.",
      zh: "Â∫ÜÁ•ùÂ§öÊ†∑ÊÄßÁöÑËâ≤ÂΩ©ÁàÜÁÇ∏„ÄÇ"
    },
    quote: {
      fr: "La couleur est la musique de l‚Äô≈ìil.",
      en: "Color is the music of the eye.",
      es: "El color es la m√∫sica del ojo.",
      ru: "–¶–≤–µ—Ç ‚Äî —ç—Ç–æ –º—É–∑—ã–∫–∞ –¥–ª—è –≥–ª–∞–∑.",
      zh: "Ëâ≤ÂΩ©ÊòØÁúºÁùõÁöÑÈü≥‰πê„ÄÇ"
    },
    authenticity: "Certifi√© sur Pi Blockchain (#TX 7c3e2...)",
    edition: "1/1 (pi√®ce unique)",
    provenance: "Cr√©√© par l‚Äôartiste, jamais vendu.",
    status: {
      fr: "Disponible",
      en: "Available",
      es: "Disponible",
      ru: "–î–æ—Å—Ç—É–ø–Ω–æ",
      zh: "ÂèØÁî®"
    },
    price: 15,
    priceUSD: 120,
    saleMode: {
      fr: "Achat direct",
      en: "Direct buy",
      es: "Compra directa",
      ru: "–ü—Ä—è–º–∞—è –ø–æ–∫—É–ø–∫–∞",
      zh: "Áõ¥Êé•Ë¥≠‰π∞"
    },
    lastBid: null,
    views: 650,
    favorites: 98,
    comments: 12,
    image: "https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80"
  }
];
const artists = [
  {
    id: 1,
    name: "Amina K.",
    bio: "Artiste num√©rique passionn√©e par la m√©moire africaine et l‚Äôinnovation blockchain.",
    Pays: "S√©n√©gal",
    avatar: "https://randomuser.me/api/portraits/women/44.jpg",
    website: "https://aminak.art",
    socials: {
      instagram: "https://instagram.com/aminak",
      twitter: "https://twitter.com/aminak"
    },
    artworks: [1]
  },
  {
    id: 2,
    name: "Jean Dubois",
    bio: "Peintre contemporain, explorateur de la nature et des couleurs.",
    Pays: "France",
    avatar: "https://randomuser.me/api/portraits/men/32.jpg",
    website: "",
    socials: {},
    artworks: [2]
  },
  {
    id: 3,
    name: "Lina Chen",
    bio: "Cr√©atrice digitale, inspir√©e par la diversit√© et la couleur.",
    Pays: "Chine",
    avatar: "https://randomuser.me/api/portraits/women/68.jpg",
    website: "",
    socials: {},
    artworks: [3]
  }
];

// R√©actions et commentaires en m√©moire (√† remplacer par une vraie base plus tard)
const reactionsData = {};
const commentsData = {};

// Ajoute une r√©action √† une ≈ìuvre
function addReaction(artId, type) {
  if (!reactionsData[artId]) reactionsData[artId] = {like:0, love:0, bravo:0, inspire:0};
  reactionsData[artId][type]++;
  renderReactions(artId);
  addPoints(type); // Ajoute cette ligne
}
function renderReactions(artId) {
  const r = reactionsData[artId] || {like:0, love:0, bravo:0, inspire:0};
  document.getElementById(`reactions-${artId}`).innerHTML =
    `üëç ${r.like} ‚ù§Ô∏è ${r.love} üëè ${r.bravo} üé® ${r.inspire}`;
}
function addComment(artId) {
  const input = document.getElementById(`comment-input-${artId}`);
  const val = input.value.trim();
  if (!val) return;
  if (!commentsData[artId]) commentsData[artId] = [];
  commentsData[artId].push({text: val, date: new Date().toLocaleString()});
  input.value = "";
  renderComments(artId);
  addPoints("comment"); // Ajoute cette ligne
}

// Affiche les commentaires
function renderComments(artId) {
  const ul = document.getElementById(`comments-${artId}`);
  const list = commentsData[artId] || [];
  ul.innerHTML = list.map(c =>
    `<li style="background:rgba(255,255,255,0.07);margin:0.2rem 0;padding:0.3rem;border-radius:6px;">
      <span>${c.text}</span>
      <span style="float:right;font-size:0.8em;color:#ccc;">${c.date}</span>
    </li>`
  ).join('');
}

// Affiche les r√©actions et commentaires √† chaque rendu
function renderAllExtras() {
  artworks.forEach(art => {
    renderReactions(art.id);
    renderComments(art.id);
  });
}

// Affichage de la marketplace avec fiches, r√©actions et commentaires
function renderMarketplace(lang = "fr") {
  const list = document.getElementById("marketplaceList");
  list.innerHTML = artworks.map(art => `
    <div style="margin:1rem 0;padding:1.5rem;background:rgba(255,255,255,0.08);border-radius:14px;text-align:left;max-width:500px;display:inline-block;">
      <img src="${art.image}" alt="${art.title[lang] || art.title.fr}" style="width:120px;height:120px;object-fit:cover;border-radius:8px;float:right;margin-left:1rem;">
    <h3 style="margin-top:0;"><a href="#" onclick="window.showArtworkDetail(${art.id});return false;" style="color:inherit;text-decoration:none;">${art.title[lang] || art.title.fr}</a></h3>
      <p><strong>Artiste :</strong> <a href="#" onclick="window.showArtistProfileByName('${art.artist.name.replace(/'/g, "\\'")}');return false;" style="color:gold;">${art.artist.name}</a></p>
      <p><strong>Ann√©e :</strong> ${art.year}</p>
      <p><strong>Type :</strong> ${art.type}</p>
      <p><strong>Dimensions :</strong> ${art.dimensions}</p>
      <p><strong>Technique :</strong> ${art.technique[lang] || art.technique.fr}</p>
      <p><strong>Inspiration :</strong> <em>${art.inspiration[lang] || art.inspiration.fr}</em></p>
      <p><strong>‚Äú${art.quote[lang] || art.quote.fr}‚Äù</strong></p>
      <p><strong>Authenticit√© :</strong> ${art.authenticity}</p>
      <p><strong>√âdition :</strong> ${art.edition}</p>
      <p><strong>Provenance :</strong> ${art.provenance}</p>
      <p><strong>Statut :</strong> ${art.status[lang] || art.status.fr}</p>
      <p><strong>Prix :</strong> ${art.price} Pi (~$${art.priceUSD})</p>
      <p><strong>Mode de vente :</strong> ${art.saleMode[lang] || art.saleMode.fr}</p>
      ${art.lastBid ? `<p><strong>Derni√®re ench√®re :</strong> ${art.lastBid} Pi</p>` : ""}
      <p><strong>Engagement :</strong> ${art.views} vues ¬∑ ${art.favorites} favoris ¬∑ ${art.comments} commentaires</p>
      <button onclick="buyPiNFT('${art.id}')">${translations[lang].buyBtn}</button>
      <div style="clear:both"></div>
      <div style="margin-top:1rem;">
        <button onclick="addReaction(${art.id}, 'like')">üëç</button>
        <button onclick="addReaction(${art.id}, 'love')">‚ù§Ô∏è</button>
        <button onclick="addReaction(${art.id}, 'bravo')">üëè</button>
        <button onclick="addReaction(${art.id}, 'inspire')">üé®</button>
        <span id="reactions-${art.id}"></span>
      </div>
      <div style="margin-top:1rem;">
        <input type="text" id="comment-input-${art.id}" placeholder="Laisser un commentaire..." style="width:70%;">
        <button onclick="addComment(${art.id})">üí¨</button>
        <ul id="comments-${art.id}" style="list-style:none;padding:0;margin:0.5rem 0 0 0;"></ul>
      </div>
    </div>
  `).join('');
  renderAllExtras();
}

// Affichage initial
renderMarketplace(document.getElementById("langSwitcher").value);

// Mise √† jour de la marketplace lors du changement de langue
document.getElementById("langSwitcher").addEventListener("change", function() {
  renderMarketplace(this.value);
});
</script>
<script>
const piWallet = "pi_wallet_address_1yfj564";
const artWallet = "artcoin_wallet_address_xyz789";
const donorList = [
  {name: "Alice", amount: 50, coin: "Pi Coin"},
  {name: "Bob", amount: 30, coin: "Art Coin"},
  {name: "Chloe", amount: 100, coin: "Pi Coin"}
];

// Affiche le QR code et l'adresse pour le don
function showDonateModal(type) {
  const modal = document.getElementById('donateModal');
  let wallet = type === 'pi' ? piWallet : artWallet;
  let coin = type === 'pi' ? "Pi Coin" : "Art Coin";
  modal.innerHTML = `
    <div style="background:#fff;color:#222;padding:1rem;border-radius:10px;display:inline-block;">
      <strong>Adresse ${coin} :</strong><br>
      <span style="font-size:1.1rem;">${wallet}</span><br>
      <img src="https://api.qrserver.com/v1/create-qr-code/?data=${wallet}&amp;size=120x120" alt="QR Code"><br>
      <button onclick="document.getElementById('donateModal').style.display='none'">Fermer</button>
    </div>
  `;
  modal.style.display = "block";
}

// Affiche le mur des donateurs avec badge M√©c√®ne
function renderDonorWall() {
  const ul = document.getElementById('donorList');
  ul.innerHTML = donorList.map(d => 
    `<li>üéñÔ∏è <strong>${d.name}</strong> ‚Äî ${d.amount} ${d.coin} ${d.amount >= 50 ? 'üåü <span style="color:gold;">M√©c√®ne GlobalArtpro</span>' : ''}</li>`
  ).join('');
}
renderDonorWall();

// Simule l'envoi du formulaire partenaire
function submitPartnerForm(e) {
  e.preventDefault();
  document.getElementById('partnerThanks').textContent = "Merci pour votre demande ! Nous vous contacterons rapidement.";
  setTimeout(() => {
    document.getElementById('partnerForm').style.display = 'none';
    document.getElementById('partnerThanks').textContent = "";
  }, 2500);
}
</script>
<script>
// Syst√®me de points et badges (stock√© en m√©moire pour la d√©mo)
let userPoints = 0;
let userBadges = [];

// Fonction pour ajouter des points selon l'action
function addPoints(action) {
  let pts = 0;
  switch(action) {
    case "like": pts = 1; break;
    case "love": pts = 2; break;
    case "bravo": pts = 2; break;
    case "inspire": pts = 3; break;
    case "comment": pts = 2; break;
    case "don": pts = 5; break;
    default: pts = 0;
  }
  userPoints += pts;
  checkBadges();
  renderUserBadges();
}

// Fonction pour v√©rifier et attribuer des badges
function checkBadges() {
  if (userPoints >= 10 && !userBadges.includes("D√©butant")) userBadges.push("D√©butant");
  if (userPoints >= 50 && !userBadges.includes("Supporter")) userBadges.push("Supporter");
  if (userPoints >= 100 && !userBadges.includes("Ambassadeur")) userBadges.push("Ambassadeur");
}

// Affiche les points et badges dans la section gamification
function renderUserBadges() {
  document.getElementById("userBadges").innerHTML = `
    <p>Points‚ÄØ: <strong>${userPoints}</strong></p>
    <p>Badges‚ÄØ: ${userBadges.map(b => `<span style="background:gold;color:#2d0066;padding:0.3em 0.7em;border-radius:8px;margin:0 0.3em;">${b}</span>`).join('') || "Aucun badge pour l‚Äôinstant"}</p>
  `;
}
renderUserBadges();
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// Exemple de stats pour un artiste (√† remplacer par des vraies donn√©es plus tard)
const analyticsData = {
  vues: [1200, 1400, 1600, 1800, 2000, 2100, 2300], // par jour
  labels: ["Lun", "Mar", "Mer", "Jeu", "Ven", "Sam", "Dim"],
  likes: 340,
  loves: 120,
  bravos: 80,
  inspires: 60,
  dons: 15,
  piTotal: 320,
  artTotal: 110,
  pays: { "Europe": 40, "Afrique": 30, "Asie": 20, "Am√©riques": 10 }
};
function renderAnalytics() {
  const el = document.getElementById("artistAnalytics");
  el.innerHTML = `
    <canvas id="viewsChart" width="400" height="180"></canvas>
    <p>
      üëç Likes : <strong>${analyticsData.likes}</strong> &nbsp;
      ‚ù§Ô∏è Loves : <strong>${analyticsData.loves}</strong> &nbsp;
      üëè Bravos : <strong>${analyticsData.bravos}</strong> &nbsp;
      üé® Inspires : <strong>${analyticsData.inspires}</strong>
    </p>
    <p>
      üí∞ Dons re√ßus : <strong>${analyticsData.dons}</strong><br>
      Pi Coin : <strong>${analyticsData.piTotal}</strong> | Art Coin : <strong>${analyticsData.artTotal}</strong>
    </p>
    <canvas id="geoChart" width="300" height="180"></canvas>
  `;

  // Graphique des vues
  new Chart(document.getElementById('viewsChart').getContext('2d'), {
    type: 'line',
    data: {
      labels: analyticsData.labels,
      datasets: [{
        label: 'Vues par jour',
        data: analyticsData.vues,
        borderColor: '#ffd700',
        backgroundColor: 'rgba(255,215,0,0.2)',
        tension: 0.3
      }]
    },
    options: {
      plugins: { legend: { display: false } },
      scales: { y: { beginAtZero: true } }
    }
  });

  // Graphique g√©ographique
  new Chart(document.getElementById('geoChart').getContext('2d'), {
    type: 'doughnut',
    data: {
      labels: Object.keys(analyticsData.pays),
      datasets: [{
        data: Object.values(analyticsData.pays),
        backgroundColor: ['#ffd700', '#6a11cb', '#2575fc', '#ff6384']
      }]
    },
    options: {
      plugins: { legend: { position: 'bottom' } }
    }
  });
}

renderAnalytics();
</script>
<section id="adminSection" class="card" style="display:none;">
  <h2>Back-office Admin</h2>
  <div id="adminArtists"></div>
  <div id="adminArtworks"></div>
</section>

<section id="artistProfileSection" class="card" style="display:none;">
  <div id="artistProfile"></div>
  <button onclick="document.getElementById('artistProfileSection').style.display='none'">Fermer</button>
</section>
<section id="artworkDetailSection" class="card" style="display:none;">
  <div id="artworkDetail"></div>
  <button onclick="document.getElementById('artworkDetailSection').style.display='none'">Fermer</button>
</section>

<footer>
  <p>&copy; 2025 GlobalArtPro - Cr√©√© pour les artistes du monde entier</p>
</footer>

<div id="cultureTooltip"></div>

<script>
// Affiche la fiche d√©taill√©e d'une ≈ìuvre
function showArtworkDetail(artId) {
  const art = artworks.find(a => a.id === artId);
  if (!art) return;
  const html = `
    <img src="${art.image}" alt="${art.title.fr}" style="width:180px;height:180px;object-fit:cover;border-radius:12px;float:right;margin-left:1rem;">
    <h3>${art.title.fr}</h3>
  <p><strong>Artiste :</strong> <a href="#" onclick="window.showArtistProfile(${art.id});return false;" style="color:gold;">${art.artist.name}</a></p>
    <p><strong>Ann√©e :</strong> ${art.year}</p>
    <p><strong>Type :</strong> ${art.type}</p>
    <p><strong>Dimensions :</strong> ${art.dimensions}</p>
    <p><strong>Technique :</strong> ${art.technique.fr}</p>
    <p><strong>Inspiration :</strong> <em>${art.inspiration.fr}</em></p>
    <p><strong>‚Äú${art.quote.fr}‚Äù</strong></p>
    <p><strong>Authenticit√© :</strong> ${art.authenticity}</p>
    <p><strong>√âdition :</strong> ${art.edition}</p>
    <p><strong>Provenance :</strong> ${art.provenance}</p>
    <p><strong>Statut :</strong> ${art.status.fr}</p>
    <p><strong>Prix :</strong> ${art.price} Pi (~$${art.priceUSD})</p>
    <p><strong>Mode de vente :</strong> ${art.saleMode.fr}</p>
    <div style="clear:both"></div>
    <div style="margin-top:1rem;">
      <button onclick="addReaction(${art.id}, 'like')">üëç</button>
      <button onclick="addReaction(${art.id}, 'love')">‚ù§Ô∏è</button>
      <button onclick="addReaction(${art.id}, 'bravo')">üëè</button>
      <button onclick="addReaction(${art.id}, 'inspire')">üé®</button>
      <span id="reactions-detail-${art.id}"></span>
    </div>
    <div style="margin-top:1rem;">
      <input type="text" id="comment-detail-input-${art.id}" placeholder="Laisser un commentaire..." style="width:70%;">
      <button onclick="addDetailComment(${art.id})">üí¨</button>
      <ul id="comments-detail-${art.id}" style="list-style:none;padding:0;margin:0.5rem 0 0 0;"></ul>
    </div>
  `;
  document.getElementById("artworkDetail").innerHTML = html;
  document.getElementById("artworkDetailSection").style.display = "block";
  renderDetailReactions(artId);
  renderDetailComments(artId);
}

// R√©actions et commentaires pour la fiche d√©taill√©e
function renderDetailReactions(artId) {
  const r = reactionsData[artId] || {like:0, love:0, bravo:0, inspire:0};
  document.getElementById(`reactions-detail-${artId}`).innerHTML =
    `üëç ${r.like} ‚ù§Ô∏è ${r.love} üëè ${r.bravo} üé® ${r.inspire}`;
}
function addDetailComment(artId) {
  const input = document.getElementById(`comment-detail-input-${artId}`);
  const val = input.value.trim();
  if (!val) return;
  if (!commentsData[artId]) commentsData[artId] = [];
  commentsData[artId].push({text: val, date: new Date().toLocaleString()});
  input.value = "";
  renderDetailComments(artId);
}
function renderDetailComments(artId) {
  const ul = document.getElementById(`comments-detail-${artId}`);
  const list = commentsData[artId] || [];
  ul.innerHTML = list.map(c =>
    `<li style="background:rgba(255,255,255,0.07);margin:0.2rem 0;padding:0.3rem;border-radius:6px;">
      <span>${c.text}</span>
      <span style="float:right;font-size:0.8em;color:#ccc;">${c.date}</span>
    </li>`
  ).join('');
}

function showArtistProfile(artId) {
  // On cherche l'artiste qui poss√®de cette ≈ìuvre
  const artist = artists.find(a => a.artworks.includes(artId));
  if (!artist) return;
  // Galerie des ≈ìuvres (miniatures cliquables)
  const gallery = artist.artworks.map(id => {
    const art = artworks.find(a => a.id === id);
    if (!art) return "";
    return `
      <div style="display:inline-block;margin:0.5rem;">
        <img src="${art.image}" alt="${art.title.fr}" style="width:90px;height:90px;object-fit:cover;border-radius:8px;box-shadow:0 2px 8px #0002;">
        <br>
        <a href="#" onclick="window.showArtworkDetail(${art.id});return false;" style="color:gold;text-decoration:none;font-size:0.95em;">${art.title.fr}</a>
      </div>
    `;
  }).join('');
  const html = `
    <img src="${artist.avatar || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(artist.name)}" alt="${artist.name}" style="width:100px;height:100px;border-radius:50%;box-shadow:0 2px 8px #0003;margin-bottom:1rem;">
    <h3>${artist.name}</h3>
    <p>${artist.bio || ""}</p>
    ${artist.website ? `<p><a href="${artist.website}" target="_blank">Site web</a></p>` : ""}
    ${artist.socials.instagram ? `<a href="${artist.socials.instagram}" target="_blank">Instagram</a> ` : ""}
    ${artist.socials.twitter ? `<a href="${artist.socials.twitter}" target="_blank">Twitter</a>` : ""}
    <h4>Galerie</h4>
    <div style="text-align:center;">${gallery || "<em>Aucune ≈ìuvre en ligne.</em>"}</div>
    <div style="clear:both"></div>
  `;
  document.getElementById("artistProfile").innerHTML = html;
  document.getElementById("artistProfileSection").style.display = "block";
}
window.showArtistProfile = showArtistProfile;
window.showArtworkDetail = showArtworkDetail;
</script>
<script>
// Stockage local pour la d√©mo
let registeredArtists = JSON.parse(localStorage.getItem("registeredArtists") || "[]");
let currentArtist = JSON.parse(localStorage.getItem("currentArtist") || "null");

function registerArtist(e) {
  e.preventDefault();
  const name = document.getElementById("regName").value.trim();
  const email = document.getElementById("regEmail").value.trim();
  const pass = document.getElementById("regPass").value;
  const bio = document.getElementById("regBio").value.trim();
  const role = document.getElementById("regRole").value;
  if (registeredArtists.find(a => a.name === name)) {
    alert("Ce nom d'artiste existe d√©j√† !");
    return;
  }
  if (registeredArtists.find(a => a.email === email)) {
    alert("Cet email est d√©j√† utilis√© !");
    return;
  }
  const artist = { name, email, pass, bio, role };
  registeredArtists.push(artist);
  localStorage.setItem("registeredArtists", JSON.stringify(registeredArtists));
  alert("Inscription r√©ussie ! Vous pouvez maintenant vous connecter.");
  document.getElementById("registerForm").reset();
}

function loginArtist(e) {
  e.preventDefault();
  const name = document.getElementById("loginName").value.trim();
  const pass = document.getElementById("loginPass").value;
  const artist = registeredArtists.find(a => a.name === name && a.pass === pass);
  if (!artist) {
    alert("Nom ou mot de passe incorrect !");
    return;
  }
  currentArtist = artist;
  localStorage.setItem("currentArtist", JSON.stringify(currentArtist));
  showArtistWelcome();
}

function showArtistWelcome() {
  document.getElementById("authForms").style.display = "none";
  document.getElementById("artistWelcome").style.display = "block";
  document.getElementById("artistWelcome").innerHTML = `
    <h3>Bienvenue, ${currentArtist.name} !</h3>
    <p>R√¥le : <strong>${currentArtist.role}</strong></p>
    <p>${currentArtist.bio || ""}</p>
    <button onclick="logoutArtist()">Se d√©connecter</button>
    <hr>
    <h4>Ajouter une ≈ìuvre</h4>
    <form id="addArtworkForm" onsubmit="addArtwork(event)">
      <input type="text" id="artTitle" placeholder="Titre de l'≈ìuvre" required><br>
      <input type="text" id="artType" placeholder="Type (ex: Peinture, NFT...)" required><br>
      <input type="number" id="artYear" placeholder="Ann√©e" required value=""><br>
      <input type="text" id="artImage" placeholder="URL de l'image" required><br>
      <button type="submit">Ajouter</button>
    </form>
    <div id="myArtworks"></div>
  `;
  renderMyArtworks();
}
 
function logoutArtist() {
  currentArtist = null;
  localStorage.removeItem("currentArtist");
  document.getElementById("artistWelcome").style.display = "none";
  document.getElementById("authForms").style.display = "block";
}

// Affiche l'accueil si d√©j√† connect√©
if (currentArtist) showArtistWelcome();
function addArtwork(e) {
  e.preventDefault();
  const title = document.getElementById("artTitle").value.trim();
  const type = document.getElementById("artType").value.trim();
  const year = document.getElementById("artYear").value.trim();
  const image = document.getElementById("artImage").value.trim();
  // G√©n√®re un nouvel ID unique
  const newId = artworks.length ? Math.max(...artworks.map(a => a.id)) + 1 : 1;
  // Ajoute l‚Äô≈ìuvre √† la liste globale
  artworks.push({
    id: newId,
    title: { fr: title },
    artist: { name: currentArtist.name, profile: "#" },
    year: year,
    type: type,
    dimensions: "",
    technique: { fr: "" },
    inspiration: { fr: "" },
    quote: { fr: "" },
    authenticity: "",
    edition: "",
    provenance: "",
    status: { fr: "Disponible" },
    price: 0,
    priceUSD: 0,
    saleMode: { fr: "" },
    lastBid: null,
    views: 0,
    favorites: 0,
    comments: 0,
    image: image
  });
  // Ajoute l‚ÄôID de l‚Äô≈ìuvre √† l‚Äôartiste courant (en m√©moire)
  let artistObj = artists.find(a => a.name === currentArtist.name);
  if (artistObj) {
    artistObj.artworks.push(newId);
  } else {
    // Si l'artiste n'existe pas encore dans artists, on l'ajoute
    artists.push({
      id: artists.length ? Math.max(...artists.map(a => a.id)) + 1 : 1,
      name: currentArtist.name,
      bio: currentArtist.bio,
      avatar: "",
      website: "",
      socials: {},
      artworks: [newId]
    });
  }
  document.getElementById("addArtworkForm").reset();
  renderMyArtworks();
  renderMarketplace(document.getElementById("langSwitcher").value);
}

function renderMyArtworks() {
  let artistObj = artists.find(a => a.name === currentArtist.name);
  if (!artistObj || !artistObj.artworks.length) {
    document.getElementById("myArtworks").innerHTML = "<p>Aucune ≈ìuvre ajout√©e.</p>";
    return;
  }
  document.getElementById("myArtworks").innerHTML = `
    <h5>Mes ≈ìuvres :</h5>
    <ul>
      ${artistObj.artworks.map(id => {
        const art = artworks.find(a => a.id === id);
        if (!art) return "";
        return `<li>
          <strong>${art.title.fr}</strong> (${art.year}) 
          <button onclick="editArtwork(${art.id})">Modifier</button>
          <button onclick="deleteArtwork(${art.id})" style="color:red;">Supprimer</button>
        </li>`;
      }).join('')}
    </ul>
    <div id="editArtworkZone"></div>
  `;
}
function editArtwork(artId) {
  const art = artworks.find(a => a.id === artId);
  if (!art) return;
  document.getElementById("editArtworkZone").innerHTML = `
    <h5>Modifier l'≈ìuvre</h5>
    <form id="editArtworkForm" onsubmit="saveArtworkEdit(event, ${artId})">
      <input type="text" id="editArtTitle" value="${art.title.fr}" required><br>
      <input type="text" id="editArtType" value="${art.type}" required><br>
      <input type="number" id="editArtYear" value="${art.year}" required><br>
      <input type="text" id="editArtImage" value="${art.image}" required><br>
      <button type="submit">Enregistrer</button>
      <button type="button" onclick="cancelEditArtwork()">Annuler</button>
    </form>
  `;
}

function saveArtworkEdit(e, artId) {
  e.preventDefault();
  const art = artworks.find(a => a.id === artId);
  if (!art) return;
  art.title.fr = document.getElementById("editArtTitle").value.trim();
  art.type = document.getElementById("editArtType").value.trim();
  art.year = document.getElementById("editArtYear").value.trim();
  art.image = document.getElementById("editArtImage").value.trim();
  document.getElementById("editArtworkZone").innerHTML = "";
  renderMyArtworks();
  renderMarketplace(document.getElementById("langSwitcher").value);
}

function cancelEditArtwork() {
  document.getElementById("editArtworkZone").innerHTML = "";
}

function deleteArtwork(artId) {
  if (!confirm("Supprimer cette ≈ìuvre ?")) return;
  // Retire l‚Äô≈ìuvre du tableau artworks
  const idx = artworks.findIndex(a => a.id === artId);
  if (idx !== -1) artworks.splice(idx, 1);
  // Retire l‚ÄôID de l‚Äô≈ìuvre de l‚Äôartiste
  let artistObj = artists.find(a => a.name === currentArtist.name);
  if (artistObj) {
    artistObj.artworks = artistObj.artworks.filter(id => id !== artId);
  }
  renderMyArtworks();
  renderMarketplace(document.getElementById("langSwitcher").value);
}
</script>
<script>
// Affiche la section admin quand on clique sur "Admin"
document.getElementById("btnAdmin").onclick = function() {
  document.getElementById("adminSection").style.display = "block";
  renderAdmin();
  window.scrollTo(0, document.body.scrollHeight);
};

// Rendu du back-office admin
function renderAdmin() {
  // Liste des artistes
  let htmlArtists = "<h3>Comptes artistes</h3><ul>";
  registeredArtists.forEach((a, i) => {
    htmlArtists += `<li>
      <strong>${a.name}</strong> (${a.email}) - R√¥le: ${a.role}
      <button onclick="validateArtist(${i})">Valider</button>
      <button onclick="deleteArtist(${i})" style="color:red;">Supprimer</button>
    </li>`;
  });
  htmlArtists += "</ul>";
  document.getElementById("adminArtists").innerHTML = htmlArtists;

  // Liste des ≈ìuvres
  let htmlArtworks = "<h3>≈íuvres en ligne</h3><ul>";
  artworks.forEach((art, i) => {
    htmlArtworks += `<li>
      <strong>${art.title.fr}</strong> par ${art.artist.name} (${art.year})
      <button onclick="deleteArtworkAdmin(${art.id})" style="color:red;">Supprimer</button>
    </li>`;
  });
  htmlArtworks += "</ul>";
  document.getElementById("adminArtworks").innerHTML = htmlArtworks;
}

// Valider un artiste (exemple‚ÄØ: on ajoute un champ valid√©)
function validateArtist(index) {
  registeredArtists[index].validated = true;
  localStorage.setItem("registeredArtists", JSON.stringify(registeredArtists));
  alert("Artiste valid√© !");
  renderAdmin();
}

// Supprimer un compte artiste
function deleteArtist(index) {
  if (!confirm("Supprimer ce compte artiste ?")) return;
  // Supprime aussi ses ≈ìuvres
  const artistName = registeredArtists[index].name;
  let artistObj = artists.find(a => a.name === artistName);
  if (artistObj) {
    artistObj.artworks.forEach(id => {
      const idx = artworks.findIndex(a => a.id === id);
      if (idx !== -1) artworks.splice(idx, 1);
    });
    // Supprime l'artiste du tableau artists
    artists.splice(artists.indexOf(artistObj), 1);
  }
  registeredArtists.splice(index, 1);
  localStorage.setItem("registeredArtists", JSON.stringify(registeredArtists));
  renderAdmin();
  renderMarketplace(document.getElementById("langSwitcher").value);
}

// Supprimer une ≈ìuvre (admin)
function deleteArtworkAdmin(artId) {
  if (!confirm("Supprimer cette ≈ìuvre ?")) return;
  const idx = artworks.findIndex(a => a.id === artId);
  if (idx !== -1) artworks.splice(idx, 1);
  // Retire l‚ÄôID de l‚Äô≈ìuvre de l‚Äôartiste
  artists.forEach(artist => {
    artist.artworks = artist.artworks.filter(id => id !== artId);
  });
  renderAdmin();
  renderMarketplace(document.getElementById("langSwitcher").value);
}
</script>
<script>
function scrollToSection(id) {
  const el = document.getElementById(id);
  if (el) el.scrollIntoView({behavior: "smooth"});
}
</script>
<script>
function renderGallery() {
  const filter = document.getElementById("galleryFilter").value;
  let filtered = artworks;
  if (filter !== "all") {
    filtered = artworks.filter(a => a.type === filter);
  }
  document.getElementById("galleryList").innerHTML = filtered.length
    ? filtered.map(art => `
      <div style="display:inline-block;margin:1rem;padding:1rem;background:rgba(255,255,255,0.08);border-radius:12px;max-width:260px;vertical-align:top;">
        <img src="${art.image}" alt="${art.title.fr}" style="width:100%;height:140px;object-fit:cover;border-radius:8px;">
        <h4 style="margin:0.5rem 0 0 0;">${art.title.fr}</h4>
        <p style="margin:0.2rem 0 0.5rem 0;font-size:0.95em;color:#ffd700;"><strong>${art.artist.name}</strong></p>
        <p style="font-size:0.95em;">${art.type} ¬∑ ${art.year}</p>
        <button onclick="window.showArtworkDetail(${art.id})" style="margin-top:0.5rem;">Voir d√©tail</button>
      </div>
    `).join('')
    : "<p>Aucune ≈ìuvre trouv√©e pour cette cat√©gorie.</p>";
}
renderGallery();
</script>
<script>
function showCulture(region) {
  const infos = {
    "Afrique": "<h3>Afrique</h3><p>D√©couvrez la richesse des cultures africaines, de l‚Äôart ancestral aux cr√©ations contemporaines.</p>",
    "Europe": "<h3>Europe</h3><p>Un patrimoine artistique et architectural unique, berceau de nombreux mouvements culturels.</p>",
    "Asie": "<h3>Asie</h3><p>Des traditions mill√©naires, une diversit√© d‚Äôexpressions artistiques et spirituelles fascinantes.</p>",
    "Am√©riques": "<h3>Am√©riques</h3><p>Un m√©lange vibrant de cultures autochtones, africaines, europ√©ennes et modernes.</p>",
    "Oc√©anie": "<h3>Oc√©anie</h3><p>Des arts aborig√®nes aux influences polyn√©siennes, une cr√©ativit√© insulaire √† d√©couvrir.</p>"
  };
  document.getElementById("cultureInfo").innerHTML = infos[region] || "<p>R√©gion non trouv√©e.</p>";
}
</script>
<script>
const svgRegions = {
  afrique: "Afrique",
  europe: "Europe",
  asie: "Asie",
  ameriques: "Am√©riques",
  oceanie: "Oc√©anie"
};

const tooltip = document.getElementById("cultureTooltip");

Object.keys(svgRegions).forEach(id => {
  const el = document.getElementById(id);
  if (el) {
    el.addEventListener("mouseenter", e => {
      el.style.opacity = "0.7";
      el.style.filter = "drop-shadow(0 0 8px #ffd700)";
      tooltip.textContent = svgRegions[id];
      tooltip.style.display = "block";
    });
    el.addEventListener("mousemove", e => {
      tooltip.style.left = (e.pageX + 15) + "px";
      tooltip.style.top = (e.pageY - 10) + "px";
    });
    el.addEventListener("mouseleave", () => {
      el.style.opacity = "1";
      el.style.filter = "";
      tooltip.style.display = "none";
    });
    el.addEventListener("click", () => {
      showCulture(svgRegions[id]);
    });
  }
});
</script>
<script>
function renderArtistsByCountry(selectedCountry = null) {
  // Regroupe les artistes par pays
  const byCountry = {};
  artists.forEach(a => {
    const pays = a.Pays || a.pays;
    if (!byCountry[pays]) byCountry[pays] = [];
    byCountry[pays].push(a);
  });

  let html = "<h3>üé® Artistes par pays</h3>";
  html += "<ul style='columns:2;max-width:600px;margin:0 auto;text-align:left;'>";
  Object.keys(byCountry).sort().forEach(pays => {
    if (selectedCountry && pays !== selectedCountry) return;
    html += `<li><a href="#" onclick="renderArtistsByCountry('${pays}');return false;" style="color:#ffd700;text-decoration:underline;cursor:pointer;"><strong>${pays}</strong></a> : `;
    html += byCountry[pays].map(a =>
      `<span style="color:gold;">${a.name}</span>`
    ).join(", ");
    html += "</li>";
  });
  html += "</ul>";
  if (selectedCountry) {
    html += `<button onclick="renderArtistsByCountry()" style="margin-bottom:1em;">Tous les pays</button>`;
  }
  document.getElementById("artistsByCountry").innerHTML = html;
}
renderArtistsByCountry();
window.renderArtistsByCountry = renderArtistsByCountry;
</script>
<script>
const stories = [
  {
    region: "Afrique",
    title: "Le Lion et le Li√®vre",
    content: "Une l√©gende populaire d‚ÄôAfrique de l‚ÄôOuest o√π le li√®vre, rus√©, d√©joue la force du lion gr√¢ce √† son intelligence."
  },
  {
    region: "Europe",
    title: "La Dame Blanche",
    content: "Une histoire de fant√¥me pr√©sente dans de nombreux pays d‚ÄôEurope, symbole de myst√®re et de traditions locales."
  },
  {
    region: "Asie",
    title: "La L√©gende du Dragon",
    content: "En Chine, le dragon est un symbole de puissance et de chance, c√©l√©br√© lors de nombreuses f√™tes traditionnelles."
  },
  {
    region: "Am√©riques",
    title: "Le Colibri messager",
    content: "Chez les peuples d‚ÄôAm√©rique du Sud, le colibri est porteur de messages entre les mondes, symbole de joie et de vie."
  },
  {
    region: "Oc√©anie",
    title: "Le R√™ve aborig√®ne",
    content: "Les Aborig√®nes d‚ÄôAustralie racontent le Temps du R√™ve, origine du monde et des traditions artistiques."
  }
];

function renderStories() {
  const region = document.getElementById("storyRegion").value;
  let filtered = stories;
  if (region !== "all") {
    filtered = stories.filter(s => s.region === region);
  }
  document.getElementById("storiesList").innerHTML = filtered.length
    ? filtered.map(s => `
      <div style="margin:1rem 0;padding:1rem;background:rgba(255,255,255,0.08);border-radius:12px;">
        <h4 style="color:gold;margin-bottom:0.3em;">${s.title}</h4>
        <p style="font-size:1.05em;">${s.content}</p>
        <span style="font-size:0.95em;color:#ffd700;">${s.region}</span>
      </div>
    `).join('')
    : "<p>Aucune histoire pour cette r√©gion.</p>";
}
renderStories();
</script>
<script>
// Stockage local pour les partages culturels (pour la d√©mo)
let sharedCultures = JSON.parse(localStorage.getItem("sharedCultures") || "[]");

// Affiche le formulaire si l'artiste est connect√©
function renderSharedCultureForm() {
  if (!currentArtist) {
    document.getElementById("sharedCultureFormZone").innerHTML = "<p style='color:#ffd700;'>Connectez-vous pour partager une histoire ou une tradition de votre culture‚ÄØ!</p>";
    return;
  }
 document.getElementById("sharedCultureFormZone").innerHTML = `
  <form id="sharedCultureForm" onsubmit="submitSharedCulture(event)">
    <input type="text" id="cultureTitle" placeholder="Titre (ex: F√™te, l√©gende, tradition...)" required style="margin-bottom:0.5em;width:90%;"><br>
    <textarea id="cultureContent" placeholder="D√©crivez cette histoire, coutume ou tradition..." required style="width:90%;height:80px;margin-bottom:0.5em;"></textarea><br>
    <input type="file" id="cultureFile" accept="image/*,audio/*,video/mp4,video/webm" style="margin-bottom:0.5em;width:90%;"><br>
    <input type="url" id="cultureMedia" placeholder="Lien vid√©o/musique externe (YouTube, SoundCloud...)" style="margin-bottom:0.5em;width:90%;"><br>
    <button type="submit">Partager</button>
  </form>
`;
}
renderSharedCultureForm();

function submitSharedCulture(e) {
  e.preventDefault();
  const title = document.getElementById("cultureTitle").value.trim();
  const content = document.getElementById("cultureContent").value.trim();
  const media = document.getElementById("cultureMedia").value.trim();
  const fileInput = document.getElementById("cultureFile");
  let fileData = null;

  // Gestion upload interne (image/audio/vid√©o)
  if (fileInput.files && fileInput.files[0]) {
    const file = fileInput.files[0];
    // Limite taille √† 10 Mo
    if (file.size > 10 * 1024 * 1024) {
      alert("Fichier trop volumineux (max 10 Mo).");
      return;
    }
    const reader = new FileReader();
    reader.onload = function(evt) {
      fileData = evt.target.result;
      saveSharedCulture(title, content, media, fileData, file.type);
    };
    reader.readAsDataURL(file);
  } else {
    saveSharedCulture(title, content, media, null, null);
  }
}
function saveSharedCulture(title, content, media, fileData, fileType) {
  // Validation du lien externe (YouTube, SoundCloud, etc.)
  let validLink = false;
  if (media) {
    validLink = /(youtube\.com|youtu\.be|soundcloud\.com|vimeo\.com|spotify\.com)/i.test(media);
    if (!validLink) {
      alert("Lien externe non reconnu ou non support√©.");
      return;
    }
  }
  // Ajoute le contenu en attente de validation
  sharedCultures.push({
    artist: currentArtist.name,
    pays: currentArtist.pays || currentArtist.Pays || "‚Äî",
    titre: title,
    texte: content,
    media: media,
    file: fileData,
    fileType: fileType,
    date: new Date().toLocaleDateString(),
    validated: false, // en attente de validation
    reports: 0
  });
  localStorage.setItem("sharedCultures", JSON.stringify(sharedCultures));
  document.getElementById("sharedCultureForm").reset();
  alert("Votre contenu a √©t√© soumis et sera publi√© apr√®s validation.");
  renderSharedCultureList();
}
function renderCultureMedia(url) {
  // YouTube
  if (url.includes("youtube.com") || url.includes("youtu.be")) {
    let videoId = url.split("v=")[1] || url.split("/").pop();
    videoId = videoId.split("&")[0];
    return `<div style="margin:0.7em 0;"><iframe width="320" height="180" src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe></div>`;
  }
  // SoundCloud
  if (url.includes("soundcloud.com")) {
    return `<div style="margin:0.7em 0;"><iframe width="320" height="80" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=${encodeURIComponent(url)}"></iframe></div>`;
  }
  // Autre m√©dia (lien simple)
  return `<div style="margin:0.7em 0;"><a href="${url}" target="_blank" style="color:#ffd700;">üé∂ Voir le m√©dia</a></div>`;
}
// Affiche la liste des cultures partag√©es
function renderSharedCultureList() {
  // Seul l'admin voit tout, les autres voient seulement validated:true
  const isAdmin = currentArtist && currentArtist.role === "admin";
  const list = isAdmin ? sharedCultures : sharedCultures.filter(c => c.validated);
  if (!list.length) {
    document.getElementById("sharedCultureList").innerHTML = "<p>Aucune histoire ou tradition partag√©e pour l‚Äôinstant.</p>";
    return;
  }
  document.getElementById("sharedCultureList").innerHTML = list.map((c, idx) =>
    `<div style="margin:1rem 0;padding:1rem;background:rgba(255,255,255,0.08);border-radius:12px;">
      <h4 style="color:gold;margin-bottom:0.3em;">${c.titre}</h4>
      <p style="font-size:1.05em;">${c.texte}</p>
      ${c.file ? renderCultureFile(c.file, c.fileType) : ""}
      ${c.media ? renderCultureMedia(c.media) : ""}
      <span style="font-size:0.95em;color:#ffd700;">${c.pays} ‚Äî par ${c.artist} (${c.date})</span>
      ${!c.validated && isAdmin ? `<br><button onclick="validateSharedCulture(${idx})">Valider</button>` : ""}
      <button onclick="reportSharedCulture(${idx})" style="float:right;color:red;">Signaler</button>
      <span style="float:right;margin-right:1em;color:#ffd700;">${c.reports > 0 ? "Signalements : " + c.reports : ""}</span>
    </div>`
  ).join('');
}
function renderCultureFile(fileData, fileType) {
  if (!fileData || !fileType) return "";
  if (fileType.startsWith("image/")) {
    return `<div style="margin:0.7em 0;"><img src="${fileData}" alt="media" style="max-width:320px;max-height:180px;border-radius:8px;"></div>`;
  }
  if (fileType.startsWith("audio/")) {
    return `<div style="margin:0.7em 0;"><audio controls src="${fileData}" style="width:90%;"></audio></div>`;
  }
  if (fileType.startsWith("video/")) {
    return `<div style="margin:0.7em 0;"><video controls src="${fileData}" style="max-width:320px;max-height:180px;border-radius:8px;"></video></div>`;
  }
  return "";
}

function validateSharedCulture(idx) {
  sharedCultures[idx].validated = true;
  localStorage.setItem("sharedCultures", JSON.stringify(sharedCultures));
  renderSharedCultureList();
}

function reportSharedCulture(idx) {
  sharedCultures[idx].reports = (sharedCultures[idx].reports || 0) + 1;
  localStorage.setItem("sharedCultures", JSON.stringify(sharedCultures));
  alert("Merci, le contenu a √©t√© signal√©.");
  renderSharedCultureList();
}
renderSharedCultureList();

// Met √† jour le formulaire si connexion/d√©connexion
window.showArtistWelcome = (function(orig) {
  return function() {
    orig.apply(this, arguments);
    renderSharedCultureForm();
  };
})(window.showArtistWelcome);

window.logoutArtist = (function(orig) {
  return function() {
    orig.apply(this, arguments);
    renderSharedCultureForm();
  };
})(window.logoutArtist);
</script>
<script>
// ...autres scripts...

const countriesData = [
  { name: "P√©rou", lat: -9.19, lng: -75.02, code: "PE", continent: "Am√©riques", color: "#f39c12" },
  { name: "France", lat: 46.6, lng: 2.2, code: "FR", continent: "Europe", color: "#2980b9" },
  { name: "S√©n√©gal", lat: 14.5, lng: -14.5, code: "SN", continent: "Afrique", color: "#2ecc40" },
  { name: "Chine", lat: 35.8, lng: 104.2, code: "CN", continent: "Asie", color: "#e74c3c" }
];

let globe;
function showGlobe() {
  document.getElementById("globeContainer").innerHTML = "";
  globe = Globe()
  (document.getElementById('globeContainer'))
  .globeImageUrl('//unpkg.com/three-globe/example/img/earth-blue-marble.jpg')
  .backgroundColor('rgba(0,0,0,0)')
  .pointsData(countriesData)
  .pointLat('lat')
  .pointLng('lng')
  .pointAltitude(0.03)
  .pointColor(d => d.color)
  .pointRadius(0.7)
  .onPointClick(country => showCountryCulture(country.name))
  // Ajout des labels continents en minuscule
  .labelLat('lat')
  .labelLng('lng')
  .labelsData([
    { lat: 0, lng: 20, text: "afrique" },
    { lat: 50, lng: 15, text: "europe" },
    { lat: 35, lng: 100, text: "asie" },
    { lat: 10, lng: -70, text: "am√©riques" },
    { lat: -25, lng: 140, text: "oc√©anie" }
  ])
  .labelText('text')
  .labelSize(1.4)
  .labelColor(() => "#fff")
  .labelResolution(2)
  .labelDotRadius(0)
  .labelAltitude(0.06);
  }
showGlobe();

function showCountryCulture(countryName) {
  // Affiche la fiche culturelle du pays choisi
  let html = `<h3>${countryName}</h3>`;
  const artist = artists.find(a => (a.Pays || a.pays) === countryName);
  if (artist) {
    html += `<p><strong>Artiste :</strong> <span style="color:gold;">${artist.name}</span></p>`;
    html += `<img src="${artist.avatar}" alt="${artist.name}" style="width:80px;height:80px;border-radius:50%;">`;
  } else {
    html += `<p><em>Aucun artiste r√©f√©renc√© pour ce pays.</em></p>`;
  }
  html += `<p><button onclick="alert('D√©mo AR danse traditionnelle bient√¥t disponible !')">üíÉ Voir une danse traditionnelle en AR</button></p>`;
  html += `<p><audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio><br><span style="font-size:0.95em;">L√©gende racont√©e (exemple)</span></p>`;
  const art = artworks.find(a => artist && a.artist.name === artist.name);
  if (art) {
    html += `<p><img src="${art.image}" alt="${art.title.fr}" style="width:120px;border-radius:8px;"><br>
    <button onclick="window.showArtworkDetail(${art.id})">Acheter cette ≈ìuvre</button></p>`;
  }
  html += `<p><button onclick="alert('Live vid√©o bient√¥t disponible !')">üî¥ Participer √† un live</button></p>`;
    document.getElementById("cultureInfo").innerHTML = html;
  const countryObj = countriesData.find(c => c.name === countryName);
  showAnimatedCulturePhrases(countryObj ? countryObj.continent : "");
}

function showAnimatedCulturePhrases(continent) {
  const phrases = {
    "Afrique": ["Berceau de l‚Äôhumanit√©", "Rythmes ancestraux", "Sagesse des griots"],
    "Asie": ["Calligraphie mill√©naire", "Spiritualit√© profonde", "F√™te des lanternes"],
    "Europe": ["Renaissance artistique", "Ch√¢teaux et cath√©drales", "Philosophie et arts"],
    "Am√©riques": ["Diversit√© vibrante", "Danses rituelles", "Mythes anciens"],
    "Oc√©anie": ["Arts aborig√®nes", "√éles myst√©rieuses", "R√™ve oc√©anique"]
  };
  const container = document.getElementById("culturePhrases");
  container.innerHTML = (phrases[continent] || []).map((txt, i) =>
    `<span style="
      display:inline-block;
      margin:0 1em;
      color:#ffd700;
      font-size:1em;
      opacity:0.85;
      animation: floatPhrase 4s ${i*0.7}s infinite alternate;
    ">${txt} <span style="color:#ffd700;">‚≠ê</span></span>`
  ).join('');
}
</script>
<script>
function showGapTab(tab) {
  // Onglet actif
  document.querySelectorAll("#gapStudioTabs button").forEach(btn => btn.classList.remove("active"));
  document.getElementById("tab" + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.add("active");

  // Contenu selon l‚Äôonglet
  if (tab === "create") {
    document.getElementById("gapStudioContent").innerHTML = `
      <h3>Cr√©er avec l‚ÄôIA</h3>
      <form id="gapCreateForm" onsubmit="generateGapCreation(event)">
        <input type="text" id="gapPrompt" placeholder="D√©cris ton id√©e (ex: Un masque africain futuriste en violet et or)" style="width:90%;margin-bottom:0.7em;" required><br>
        <select id="gapType" style="margin-bottom:0.7em;">
          <option value="image">Image</option>
          <option value="musique">Musique</option>
          <option value="texte">L√©gende/Po√®me</option>
        </select><br>
        <button type="submit">G√©n√©rer</button>
      </form>
      <div id="gapResult"></div>
    `;
  }
  if (tab === "explore") {
    document.getElementById("gapStudioContent").innerHTML = `
      <h3>Explorer la culture mondiale</h3>
      <p>Pose une question culturelle √† GAP Studio (ex: "Quelle est la signification du masque Bamil√©k√© ?")</p>
      <form id="gapExploreForm" onsubmit="gapExplore(event)">
        <input type="text" id="gapExplorePrompt" placeholder="Ta question..." style="width:90%;margin-bottom:0.7em;" required><br>
        <button type="submit">Demander</button>
      </form>
      <div id="gapExploreResult"></div>
    `;
  }
  if (tab === "learn") {
    document.getElementById("gapStudioContent").innerHTML = `
      <h3>Apprendre & co-cr√©er</h3>
      <ul style="text-align:left;max-width:500px;margin:0 auto;">
        <li>üñºÔ∏è Tutoriel : G√©n√©rer ton premier NFT avec l‚ÄôIA</li>
        <li>üé∂ Composer une musique inspir√©e d‚Äôune culture</li>
        <li>ü§ù Co-cr√©er une ≈ìuvre avec GAP Studio</li>
        <li>üé≤ Quiz et d√©fis cr√©atifs</li>
      </ul>
      <p style="color:gold;">(Fonctionnalit√©s √† venir‚ÄØ: masterclass, ateliers live, etc.)</p>
    `;
  }
}
// Affiche l‚Äôonglet "Cr√©er" par d√©faut
showGapTab('create');

// Simulation de g√©n√©ration IA (√† remplacer par appel API plus tard)
async function generateGapCreation(e) {
  e.preventDefault();
  const prompt = document.getElementById("gapPrompt").value;
  const type = document.getElementById("gapType").value;
  document.getElementById("gapResult").innerHTML = "<p><em>G√©n√©ration en cours...</em></p>";

  // Appel √† ton backend qui g√®re l'API IA
  const response = await fetch('https://ton-backend.com/api/gapstudio/generate', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ prompt, type })
  });
  const data = await response.json();

  // Affichage du r√©sultat selon le type
  let html = "";
  if (type === "image") {
    html = `<img src="${data.imageUrl}" alt="Cr√©ation IA" style="max-width:100%;border-radius:12px;"><br>
      <button onclick="saveGapCreation('${data.imageUrl}', 'image', '${prompt}')">Sauvegarder</button>`;
  } else if (type === "musique") {
    html = `<audio controls src="${data.audioUrl}"></audio>
      <p><em>Musique g√©n√©r√©e inspir√©e de : ${prompt}</em></p>
      <button onclick="saveGapCreation('${data.audioUrl}', 'musique', '${prompt}')">Sauvegarder</button>`;
  } else {
    html = `<blockquote style="background:rgba(255,255,255,0.08);padding:1em;border-radius:10px;color:gold;">${data.text}</blockquote>
      <button onclick="saveGapCreation('${data.text}', 'texte', '${prompt}')">Sauvegarder</button>`;
  }
  document.getElementById("gapResult").innerHTML = html;
}
async function saveGapCreation(content, type, prompt) {
  const user = currentArtist ? currentArtist.name : "Visiteur";
  const response = await fetch('https://ton-backend.com/api/gapstudio/save', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ user, type, prompt, content })
  });
  if (response.ok) {
    alert("Cr√©ation sauvegard√©e !");
  } else {
    alert("Erreur lors de la sauvegarde.");
  }
}

// Simulation de r√©ponse culturelle
function gapExplore(e) {
  e.preventDefault();
  const prompt = document.getElementById("gapExplorePrompt").value;
  document.getElementById("gapExploreResult").innerHTML = "<p><em>Recherche culturelle en cours...</em></p>";
  setTimeout(() => {
    document.getElementById("gapExploreResult").innerHTML = `
      <p><strong>R√©ponse IA :</strong> Le masque Bamil√©k√© est un symbole de pouvoir et de spiritualit√©, utilis√© lors des c√©r√©monies traditionnelles au Cameroun.</p>
      <img src="https://upload.wikimedia.org/wikipedia/commons/2/2e/Bamileke_Mask_Cameroon.jpg" alt="Masque Bamil√©k√©" style="width:180px;border-radius:10px;">
      <audio controls src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio>
    `;
  }, 1200);
}
</script>
<!-- SDK Pi Network -->
<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<script>
  // Initialisation du SDK Pi Network
  // Remplace "your-app-id" par l'ID de ton app Pi Network (√† demander sur https://developer.minepi.com/)
  const pi = window.Pi;

  // Fonction pour connecter le wallet Pi
  async function connectPiWallet() {
    if (!pi) {
      alert("SDK Pi Network non charg√© !");
      return;
    }
    try {
      const scopes = ['payments', 'username', 'wallet_address'];
      const result = await pi.authenticate(scopes, onIncompletePaymentFound);
      alert("Connect√© avec Pi Network ! Utilisateur : " + result.user.username);
      // Tu peux stocker le username ou wallet dans localStorage si besoin
      localStorage.setItem("piUser", JSON.stringify(result.user));
    } catch (err) {
      alert("Erreur de connexion Pi Network : " + err.message);
    }
  }

  // Fonction de callback pour les paiements incomplets (optionnel)
  function onIncompletePaymentFound(payment) {
    // Ici tu peux g√©rer les paiements en attente
    console.log("Paiement Pi incomplet trouv√© :", payment);
  }

  // Lien avec le bouton de connexion
  document.getElementById("btnConnectPi").onclick = connectPiWallet;
</script>
</body>
</html>
